# PclSample
  
--- 
  
# Contents
  
PointCloudLibrary(PCL)はC++の3D点群処理ライブラリです。  
ここのサンプルではビューアーしか立ち上げていませんが、法線処理や平面推定、3次元レジストレーションなど、使いこなせれば夢のあるツールです。  
今回はあくまで環境構築メインなので、うまく立ち上がって「フムフム」と思っていただければ目的達成です。それでは内容物を見ていきましょう!!  
  
[Form.cs](/Form.cs) ... UIの部分。  
[PclWrapper.cs](/PclWrapper.cs) ... C#からC++版PointCloudLibraryを呼び出すラッパークラス。  
[source](/source) ... C++側のビルド時に必要なもの。あとで登場します。  
肝心のC++のDLLは別ソリューションで作りました。環境依存が強すぎるので共有できません。作り方は下記"How to Use"を参照ください。  
  
---  
  
# Preparation
  
* Windows10  
* VisualStudio ... C++デスクトップ開発、.NETデスクトップ開発  
  
---  
  
# How to Use
  
## C++側
  
基本的には[コチラ](http://tecsingularity.com/pcl/environment/)にあるとおり環境構築を行います。  
ただしその記事ではバージョンが古いので、PCL本体は[ココ](https://github.com/PointCloudLibrary/pcl/releases)から最新版を、途中に出てくる"main.cpp"と"CMakeList.txt"はこのリポジトリに同梱しているものを使っていただければ大丈夫です。  
書いているとおりにCMakeでソリューションを生成できたら、"project"の名前を"PCL"に、プロパティの"全般"、"詳細"で"プロジェクト名"、"ターゲット名"も"PCL"に、".exe"となっている2か所を".dll"に書き換えます。  
さらに、プロパティの"全般"→"出力ディレクトリ"にC#の.exeができるディレクトリを書いておき"ビルド"すると、そこにDLLが生成されます。  
  
かなり雑な説明でしたので不明点あればお知らせください。  
オリジナル機能を追加したい場合は"main.cpp"を編集して再ビルドしてください。  
  
## C#側
  
Pathが通っていてDLLさえできていれば、C#側の"デバッグ"ですぐに実行できます。  
うまくいけば以下のようになります。  
  
![pcl1.png](/pcl1.png)  
  
Customの方では自分で値を変えるとランダムな描画ができるのです(だから何？感がすごい)。  
なんか格好いい幾何模様を描いてください。自分は数学に弱いので落書きしかできませんでした。。。  
  
![pcl2.png](/pcl2.png)
